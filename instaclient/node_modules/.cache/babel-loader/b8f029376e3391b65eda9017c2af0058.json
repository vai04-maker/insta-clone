{"ast":null,"code":"var _jsxFileName = \"/Users/vaibhav/personal_projects/insta-client/instac/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Post from './Post';\nimport { Avatar, Button, Modal, makeStyles, Input } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_URL = 'http://localhost:8000/';\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${top}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    position: 'absolute',\n    width: 400,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nfunction App() {\n  _s();\n\n  const classes = useStyles();\n  const [posts, setPosts] = useState([]);\n  const [openSignIn, setOpenSignIn] = useState(false);\n  const [openSignUp, setOpenSignUp] = useState(false);\n  const [modalStyle, setModalStyle] = useState(getModalStyle);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [authToken, setAuthToken] = useState(null);\n  const [authTokenType, setAuthTokenType] = useState(null);\n  const [userId, setUserId] = useState('');\n  useEffect(() => {\n    setAuthToken(window.localStorage.getItem('authToken'));\n    setAuthTokenType(window.localStorage.getItem('authTokenType'));\n    setUsername(window.localStorage.getItem('username'));\n    setUserId(window.localStorage.getItem('userId'));\n  }, []);\n  useEffect(() => {\n    authToken ? window.localStorage.setItem('authToken', authToken) : window.localStorage.removeItem('authToken');\n    authTokenType ? window.localStorage.setItem('authTokenType', authTokenType) : window.localStorage.removeItem('authTokenType');\n    username ? window.localStorage.setItem('username', username) : window.localStorage.removeItem('username');\n    userId ? window.localStorage.setItem('username', userId) : window.localStorage.removeItem('userId');\n  }, [authToken, authTokenType, userId]);\n  useEffect(() => {\n    fetch(BASE_URL + 'post/all').then(response => {\n      const json = response.json();\n      console.log(json);\n\n      if (response.ok) {\n        return json;\n      }\n\n      throw response;\n    }).then(data => {\n      const result = data.sort((a, b) => {\n        const t_a = a.Timestamp.split(/[-T:]/);\n        const t_b = b.Timestamp.split(/[-T:]/);\n        const d_a = new Date(Date.UTC(t_a[0], t_a[1] - 1, t_a[2], t_a[3], t_a[4], t_a[5]));\n        const d_b = new Date(Date.UTC(t_b[0], t_b[1] - 1, t_b[2], t_b[3], t_b[4], t_b[5]));\n        return d_b - d_a;\n      });\n      return result;\n    }).then(data => {\n      setPosts(data);\n    }).catch(error => {\n      console.log(error);\n      alert(error);\n    });\n  }, []);\n\n  const signIn = event => {\n    event.preventDefault();\n    let formData = new FormData();\n    formData.append('username', username);\n    formData.append('password', password);\n    const requestOptions = {\n      method: 'POST',\n      body: formData\n    };\n    fetch(BASE_URL + 'login', requestOptions).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw response;\n    }).then(data => {\n      console.log(data);\n      setAuthToken(data.access_token);\n      setAuthTokenType(data.token_type);\n      setUserId(data.user_id);\n      setUsername(data.username);\n    }).catch(error => {\n      console.log(error);\n      alert(error);\n    });\n    setOpenSignIn(false);\n  };\n\n  const signOut = event => {\n    setAuthToken(null);\n    setAuthTokenType(null);\n    setUserId('');\n    setUsername('');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      open: openSignIn,\n      onClose: () => setOpenSignIn(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: modalStyle,\n        className: classes.paper,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"app_signin\",\n          children: [/*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"app_headerImage\",\n              src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKDo91NDgtvxVXUsti8VQ17zrdu2RnoaXJyQ&usqp=CAU\",\n              alt: \"Instagram\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"username\",\n            type: \"text\",\n            value: username,\n            onChange: e => setUsername(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"password\",\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            onClick: signIn,\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: openSignUp,\n      onClose: () => setOpenSignUp(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: modalStyle,\n        className: classes.paper,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"app_signin\",\n          children: [/*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"app_headerImage\",\n              src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKDo91NDgtvxVXUsti8VQ17zrdu2RnoaXJyQ&usqp=CAU\",\n              alt: \"Instagram\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"username\",\n            type: \"text\",\n            value: username,\n            onChange: e => setUsername(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"password\",\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            onClick: signIn,\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app_header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"app_headerImage\",\n        src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKDo91NDgtvxVXUsti8VQ17zrdu2RnoaXJyQ&usqp=CAU\",\n        alt: \"Instagram\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), authToken ? /*#__PURE__*/_jsxDEV(Button, {\n        onClick: signOut,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOpenSignIn(true),\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOpenSignUp(true),\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app_posts\",\n      children: posts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n        post: post\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"haiw0jfyIBmErvV7Bcj1KAcaLLI=\", false, function () {\n  return [useStyles];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/vaibhav/personal_projects/insta-client/instac/src/App.js"],"names":["React","useState","useEffect","Post","Avatar","Button","Modal","makeStyles","Input","BASE_URL","getModalStyle","top","left","transform","useStyles","theme","paper","backgroundColor","palette","background","position","width","border","boxShadow","shadows","padding","spacing","App","classes","posts","setPosts","openSignIn","setOpenSignIn","openSignUp","setOpenSignUp","modalStyle","setModalStyle","username","setUsername","password","setPassword","authToken","setAuthToken","authTokenType","setAuthTokenType","userId","setUserId","window","localStorage","getItem","setItem","removeItem","fetch","then","response","json","console","log","ok","data","result","sort","a","b","t_a","Timestamp","split","t_b","d_a","Date","UTC","d_b","catch","error","alert","signIn","event","preventDefault","formData","FormData","append","requestOptions","method","body","access_token","token_type","user_id","signOut","e","target","value","map","post"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAO,WAAP;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAAQC,MAAR,EAAgBC,MAAhB,EAAwBC,KAAxB,EAA+BC,UAA/B,EAA2CC,KAA3C,QAAuD,mBAAvD;;AAEA,MAAMC,QAAQ,GAAE,wBAAhB;;AAGA,SAASC,aAAT,GAAyB;AACvB,QAAMC,GAAG,GAAC,EAAV;AACA,QAAMC,IAAI,GAAC,EAAX;AAEA,SAAO;AACLD,IAAAA,GAAG,EAAG,GAAEA,GAAI,GADP;AAELC,IAAAA,IAAI,EAAG,GAAED,GAAI,GAFR;AAGLE,IAAAA,SAAS,EAAI,cAAaF,GAAI,OAAMC,IAAK;AAHpC,GAAP;AAKD;;AAED,MAAME,SAAS,GAAGP,UAAU,CAAEQ,KAAD,KAAY;AACrCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,eAAe,EAAEF,KAAK,CAACG,OAAN,CAAcC,UAAd,CAAyBH,KADrC;AAELI,IAAAA,QAAQ,EAAE,UAFL;AAGLC,IAAAA,KAAK,EAAE,GAHF;AAILC,IAAAA,MAAM,EAAE,gBAJH;AAKLC,IAAAA,SAAS,EAAER,KAAK,CAACS,OAAN,CAAc,CAAd,CALN;AAMLC,IAAAA,OAAO,EAAEV,KAAK,CAACW,OAAN,CAAc,CAAd,EAAgB,CAAhB,EAAkB,CAAlB;AANJ;AAD8B,CAAZ,CAAD,CAA5B;;AAaA,SAASC,GAAT,GAAe;AAAA;;AAEb,QAAMC,OAAO,GAAGd,SAAS,EAAzB;AAEA,QAAM,CAACe,KAAD,EAAQC,QAAR,IAAoB7B,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAAC8B,UAAD,EAAYC,aAAZ,IAA4B/B,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACgC,UAAD,EAAYC,aAAZ,IAA4BjC,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACkC,UAAD,EAAYC,aAAZ,IAA4BnC,QAAQ,CAACS,aAAD,CAA1C;AACA,QAAM,CAAC2B,QAAD,EAAUC,WAAV,IAAyBrC,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACsC,QAAD,EAAUC,WAAV,IAAyBvC,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACwC,SAAD,EAAWC,YAAX,IAA2BzC,QAAQ,CAAC,IAAD,CAAzC;AACA,QAAM,CAAC0C,aAAD,EAAeC,gBAAf,IAAmC3C,QAAQ,CAAC,IAAD,CAAjD;AACA,QAAM,CAAC4C,MAAD,EAASC,SAAT,IAAsB7C,QAAQ,CAAC,EAAD,CAApC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdwC,IAAAA,YAAY,CAAEK,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAF,CAAZ;AACAL,IAAAA,gBAAgB,CAACG,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,CAAD,CAAhB;AACAX,IAAAA,WAAW,CAACS,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAD,CAAX;AACAH,IAAAA,SAAS,CAACC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,CAAD,CAAT;AACD,GALQ,EAKP,EALO,CAAT;AASA/C,EAAAA,SAAS,CAAC,MAAM;AACduC,IAAAA,SAAS,GACLM,MAAM,CAACC,YAAP,CAAoBE,OAApB,CAA4B,WAA5B,EAAyCT,SAAzC,CADK,GAELM,MAAM,CAACC,YAAP,CAAoBG,UAApB,CAA+B,WAA/B,CAFJ;AAGAR,IAAAA,aAAa,GACTI,MAAM,CAACC,YAAP,CAAoBE,OAApB,CAA4B,eAA5B,EAA6CP,aAA7C,CADS,GAETI,MAAM,CAACC,YAAP,CAAoBG,UAApB,CAA+B,eAA/B,CAFJ;AAGAd,IAAAA,QAAQ,GACJU,MAAM,CAACC,YAAP,CAAoBE,OAApB,CAA4B,UAA5B,EAAwCb,QAAxC,CADI,GAEJU,MAAM,CAACC,YAAP,CAAoBG,UAApB,CAA+B,UAA/B,CAFJ;AAGAN,IAAAA,MAAM,GACFE,MAAM,CAACC,YAAP,CAAoBE,OAApB,CAA4B,UAA5B,EAAwCL,MAAxC,CADE,GAEFE,MAAM,CAACC,YAAP,CAAoBG,UAApB,CAA+B,QAA/B,CAFJ;AAID,GAdQ,EAcP,CAACV,SAAD,EAAWE,aAAX,EAA0BE,MAA1B,CAdO,CAAT;AAkBA3C,EAAAA,SAAS,CAAC,MAAM;AACZkD,IAAAA,KAAK,CAAC3C,QAAQ,GAAG,UAAZ,CAAL,CACG4C,IADH,CACQC,QAAQ,IAAI;AACd,YAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAT,EAAb;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,UAAGD,QAAQ,CAACI,EAAZ,EAAe;AACb,eAAOH,IAAP;AACD;;AACD,YAAMD,QAAN;AACH,KARH,EASGD,IATH,CASQM,IAAI,IAAG;AACX,YAAMC,MAAM,GAAED,IAAI,CAACE,IAAL,CAAU,CAACC,CAAD,EAAGC,CAAH,KAAS;AAC/B,cAAMC,GAAG,GAAGF,CAAC,CAACG,SAAF,CAAYC,KAAZ,CAAkB,OAAlB,CAAZ;AACA,cAAMC,GAAG,GAAGJ,CAAC,CAACE,SAAF,CAAYC,KAAZ,CAAkB,OAAlB,CAAZ;AACA,cAAME,GAAG,GAAG,IAAIC,IAAJ,CAASA,IAAI,CAACC,GAAL,CAASN,GAAG,CAAC,CAAD,CAAZ,EAAiBA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAxB,EAA2BA,GAAG,CAAC,CAAD,CAA9B,EAAmCA,GAAG,CAAC,CAAD,CAAtC,EAA2CA,GAAG,CAAC,CAAD,CAA9C,EAAmDA,GAAG,CAAC,CAAD,CAAtD,CAAT,CAAZ;AACA,cAAMO,GAAG,GAAG,IAAIF,IAAJ,CAASA,IAAI,CAACC,GAAL,CAASH,GAAG,CAAC,CAAD,CAAZ,EAAiBA,GAAG,CAAC,CAAD,CAAH,GAAO,CAAxB,EAA2BA,GAAG,CAAC,CAAD,CAA9B,EAAmCA,GAAG,CAAC,CAAD,CAAtC,EAA2CA,GAAG,CAAC,CAAD,CAA9C,EAAmDA,GAAG,CAAC,CAAD,CAAtD,CAAT,CAAZ;AACA,eAAOI,GAAG,GAAEH,GAAZ;AACD,OANa,CAAd;AAOA,aAAOR,MAAP;AACD,KAlBH,EAmBGP,IAnBH,CAmBQM,IAAI,IAAG;AACT7B,MAAAA,QAAQ,CAAC6B,IAAD,CAAR;AACH,KArBH,EAsBGa,KAtBH,CAsBSC,KAAK,IAAG;AACbjB,MAAAA,OAAO,CAACC,GAAR,CAAYgB,KAAZ;AACAC,MAAAA,KAAK,CAACD,KAAD,CAAL;AACD,KAzBH;AA2BH,GA5BQ,EA4BP,EA5BO,CAAT;;AA8BA,QAAME,MAAM,GAAIC,KAAD,IAAU;AACvBA,IAAAA,KAAK,CAACC,cAAN;AAEA,QAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4B3C,QAA5B;AACAyC,IAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BzC,QAA5B;AAEA,UAAM0C,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAE,MADa;AAErBC,MAAAA,IAAI,EAAGL;AAFc,KAAvB;AAKA1B,IAAAA,KAAK,CAAC3C,QAAQ,GAAC,OAAV,EAAmBwE,cAAnB,CAAL,CACG5B,IADH,CACQC,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACI,EAAb,EAAgB;AACd,eAAOJ,QAAQ,CAACC,IAAT,EAAP;AACD;;AACD,YAAMD,QAAN;AACD,KANH,EAOGD,IAPH,CAOQM,IAAI,IAAG;AACXH,MAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACAjB,MAAAA,YAAY,CAACiB,IAAI,CAACyB,YAAN,CAAZ;AACAxC,MAAAA,gBAAgB,CAACe,IAAI,CAAC0B,UAAN,CAAhB;AACAvC,MAAAA,SAAS,CAACa,IAAI,CAAC2B,OAAN,CAAT;AACAhD,MAAAA,WAAW,CAACqB,IAAI,CAACtB,QAAN,CAAX;AACD,KAbH,EAcGmC,KAdH,CAcSC,KAAK,IAAI;AACdjB,MAAAA,OAAO,CAACC,GAAR,CAAYgB,KAAZ;AACAC,MAAAA,KAAK,CAACD,KAAD,CAAL;AACD,KAjBH;AAmBEzC,IAAAA,aAAa,CAAC,KAAD,CAAb;AACL,GAhCC;;AAkCF,QAAMuD,OAAO,GAAIX,KAAD,IAAW;AACzBlC,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAE,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAE,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAR,IAAAA,WAAW,CAAC,EAAD,CAAX;AACD,GALD;;AAOE,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,4BAEE,QAAC,KAAD;AAAO,MAAA,IAAI,EAAEP,UAAb;AAAyB,MAAA,OAAO,EAAG,MAAMC,aAAa,CAAC,KAAD,CAAtD;AAAA,6BAEE;AAAK,QAAA,KAAK,EAAEG,UAAZ;AAAwB,QAAA,SAAS,EAAEP,OAAO,CAACZ,KAA3C;AAAA,+BACE;AAAM,UAAA,SAAS,EAAC,YAAhB;AAAA,kCACE;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,iBAAf;AACE,cAAA,GAAG,EAAC,qGADN;AAEE,cAAA,GAAG,EAAC;AAFN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAME,QAAC,KAAD;AACE,YAAA,WAAW,EAAC,UADd;AAEE,YAAA,IAAI,EAAC,MAFP;AAGE,YAAA,KAAK,EAAEqB,QAHT;AAIE,YAAA,QAAQ,EAAGmD,CAAD,IAAOlD,WAAW,CAACkD,CAAC,CAACC,MAAF,CAASC,KAAV;AAJ9B;AAAA;AAAA;AAAA;AAAA,kBANF,eAWE,QAAC,KAAD;AACE,YAAA,WAAW,EAAC,UADd;AAEE,YAAA,IAAI,EAAC,UAFP;AAGE,YAAA,KAAK,EAAEnD,QAHT;AAIE,YAAA,QAAQ,EAAGiD,CAAD,IAAOhD,WAAW,CAACgD,CAAC,CAACC,MAAF,CAASC,KAAV;AAJ9B;AAAA;AAAA;AAAA;AAAA,kBAXF,eAgBE,QAAC,MAAD;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,OAAO,EAAEf,MAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,YAFF,eA6BE,QAAC,KAAD;AAAO,MAAA,IAAI,EAAE1C,UAAb;AAAyB,MAAA,OAAO,EAAG,MAAMC,aAAa,CAAC,KAAD,CAAtD;AAAA,6BAEE;AAAK,QAAA,KAAK,EAAEC,UAAZ;AAAwB,QAAA,SAAS,EAAEP,OAAO,CAACZ,KAA3C;AAAA,+BACE;AAAM,UAAA,SAAS,EAAC,YAAhB;AAAA,kCACE;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,iBAAf;AACE,cAAA,GAAG,EAAC,qGADN;AAEE,cAAA,GAAG,EAAC;AAFN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAME,QAAC,KAAD;AACE,YAAA,WAAW,EAAC,UADd;AAEE,YAAA,IAAI,EAAC,MAFP;AAGE,YAAA,KAAK,EAAEqB,QAHT;AAIE,YAAA,QAAQ,EAAGmD,CAAD,IAAOlD,WAAW,CAACkD,CAAC,CAACC,MAAF,CAASC,KAAV;AAJ9B;AAAA;AAAA;AAAA;AAAA,kBANF,eAWE,QAAC,KAAD;AACE,YAAA,WAAW,EAAC,UADd;AAEE,YAAA,IAAI,EAAC,UAFP;AAGE,YAAA,KAAK,EAAEnD,QAHT;AAIE,YAAA,QAAQ,EAAGiD,CAAD,IAAOhD,WAAW,CAACgD,CAAC,CAACC,MAAF,CAASC,KAAV;AAJ9B;AAAA;AAAA;AAAA;AAAA,kBAXF,eAgBE,QAAC,MAAD;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,OAAO,EAAEf,MAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,YA7BF,eA0DE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AACE,QAAA,GAAG,EAAC,qGADN;AAEE,QAAA,GAAG,EAAC;AAFN;AAAA;AAAA;AAAA;AAAA,cADF,EAOGlC,SAAS,gBACR,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAI8C,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADQ,gBAIV;AAAA,gCACE,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAI,MAAMvD,aAAa,CAAC,IAAD,CAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAI,MAAME,aAAa,CAAC,IAAD,CAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAXF;AAAA;AAAA;AAAA;AAAA;AAAA,YA1DF,eA6EE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,gBAEIL,KAAK,CAAC8D,GAAN,CAAUC,IAAI,iBACZ,QAAC,IAAD;AACE,QAAA,IAAI,EAAGA;AADT;AAAA;AAAA;AAAA;AAAA,cADF;AAFJ;AAAA;AAAA;AAAA;AAAA,YA7EF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAyFD;;GAzMQjE,G;UAESb,S;;;KAFTa,G;AA2MT,eAAeA,GAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport Post from './Post'\nimport {Avatar, Button, Modal, makeStyles, Input} from \"@material-ui/core\"\n\nconst BASE_URL ='http://localhost:8000/'\n\n\nfunction getModalStyle() {\n  const top=50;\n  const left=50;\n\n  return {\n    top: `${top}%`,\n    left: `${top}%`,\n    transform : `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n      backgroundColor: theme.palette.background.paper,\n      position: 'absolute',\n      width: 400,\n      border: '2px solid #000',\n      boxShadow: theme.shadows[5],\n      padding: theme.spacing(2,4,3)\n    }\n}))\n\n\n\nfunction App() {\n\n  const classes = useStyles();\n\n  const [posts, setPosts] = useState([]);\n  const [openSignIn,setOpenSignIn] =useState(false);\n  const [openSignUp,setOpenSignUp] =useState(false);\n  const [modalStyle,setModalStyle] =useState(getModalStyle);\n  const [username,setUsername] = useState('');\n  const [password,setPassword] = useState('');\n  const [authToken,setAuthToken] = useState(null);\n  const [authTokenType,setAuthTokenType] = useState(null);\n  const [userId, setUserId] = useState('');\n\n  useEffect(() => {\n    setAuthToken( window.localStorage.getItem('authToken'));\n    setAuthTokenType(window.localStorage.getItem('authTokenType'));\n    setUsername(window.localStorage.getItem('username'));\n    setUserId(window.localStorage.getItem('userId'));\n  },[])\n\n\n\n  useEffect(() => {\n    authToken \n      ? window.localStorage.setItem('authToken', authToken)\n      : window.localStorage.removeItem('authToken')\n    authTokenType\n      ? window.localStorage.setItem('authTokenType', authTokenType)\n      : window.localStorage.removeItem('authTokenType')\n    username \n      ? window.localStorage.setItem('username', username)\n      : window.localStorage.removeItem('username')\n    userId\n      ? window.localStorage.setItem('username', userId)\n      : window.localStorage.removeItem('userId')\n    \n  },[authToken,authTokenType, userId])\n\n\n\n  useEffect(() => {\n      fetch(BASE_URL + 'post/all')\n        .then(response => {\n            const json = response.json();\n            console.log(json);\n            if(response.ok){\n              return json\n            }\n            throw response\n        })\n        .then(data =>{\n          const result= data.sort((a,b) => {\n            const t_a = a.Timestamp.split(/[-T:]/);\n            const t_b = b.Timestamp.split(/[-T:]/);\n            const d_a = new Date(Date.UTC(t_a[0], t_a[1]-1, t_a[2], t_a[3], t_a[4], t_a[5] ));\n            const d_b = new Date(Date.UTC(t_b[0], t_b[1]-1, t_b[2], t_b[3], t_b[4], t_b[5] ));\n            return d_b- d_a;\n          })\n          return result\n        })\n        .then(data =>{\n            setPosts(data)\n        })\n        .catch(error =>{\n          console.log(error);\n          alert(error)\n        })\n\n  },[])\n\n  const signIn = (event) =>{\n    event.preventDefault();\n\n    let formData = new FormData();\n    formData.append('username', username);\n    formData.append('password', password);\n\n    const requestOptions = {\n      method: 'POST',\n      body : formData\n    }\n\n    fetch(BASE_URL+'login', requestOptions)\n      .then(response => {\n        if (response.ok){\n          return response.json()\n        }\n        throw response\n      })\n      .then(data =>{\n        console.log(data);\n        setAuthToken(data.access_token)\n        setAuthTokenType(data.token_type)\n        setUserId(data.user_id)\n        setUsername(data.username)\n      })\n      .catch(error => {\n        console.log(error);\n        alert(error);\n      })\n\n      setOpenSignIn(false)\n}\n\nconst signOut = (event) => {\n  setAuthToken(null);\n  setAuthTokenType(null);\n  setUserId('');\n  setUsername('');\n}\n\n  return (\n    <div className='app'>\n\n      <Modal open={openSignIn} onClose= {() => setOpenSignIn(false)}>\n\n        <div style={modalStyle} className={classes.paper}>\n          <form className='app_signin'>\n            <center>\n              <img className=\"app_headerImage\"\n                src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKDo91NDgtvxVXUsti8VQ17zrdu2RnoaXJyQ&usqp=CAU'\n                alt='Instagram'/>\n            </center>\n            <Input\n              placeholder='username'\n              type='text'\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}/>\n            <Input\n              placeholder='password'\n              type='password'\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}/>\n            <Button\n              type='submit'\n              onClick={signIn}>Login</Button>\n          </form>\n        </div>\n\n      </Modal>\n\n      <Modal open={openSignUp} onClose= {() => setOpenSignUp(false)}>\n\n        <div style={modalStyle} className={classes.paper}>\n          <form className='app_signin'>\n            <center>\n              <img className=\"app_headerImage\"\n                src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKDo91NDgtvxVXUsti8VQ17zrdu2RnoaXJyQ&usqp=CAU'\n                alt='Instagram'/>\n            </center>\n            <Input\n              placeholder='username'\n              type='text'\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}/>\n            <Input\n              placeholder='password'\n              type='password'\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}/>\n            <Button\n              type='submit'\n              onClick={signIn}>Login</Button>\n          </form>\n        </div>\n\n\n\n      </Modal>\n\n      <div className=\"app_header\">\n        <img className=\"app_headerImage\"\n          src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKDo91NDgtvxVXUsti8VQ17zrdu2RnoaXJyQ&usqp=CAU'\n          alt='Instagram'\n        />\n\n\n        {authToken ? (\n          <Button onClick = {signOut}>Logout</Button>\n        ) :\n        (\n        <div>\n          <Button onClick = {() => setOpenSignIn(true)}>Login</Button>\n          <Button onClick = {() => setOpenSignUp(true)}>Sign Up</Button>\n        </div>\n        )\n        }\n      </div>\n\n      <div className=\"app_posts\">\n        {\n          posts.map(post => (\n            <Post\n              post ={post}\n            />\n          ))\n        }\n      </div>  \n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}